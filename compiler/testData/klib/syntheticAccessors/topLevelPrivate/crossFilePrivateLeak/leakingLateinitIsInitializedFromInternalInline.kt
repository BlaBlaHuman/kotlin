// IGNORE_BACKEND: ANY
// ^^^ Muted because a private backing field of a lateinit property generated by `NullableFieldsForLateinitCreationLowering`
//     leaks through the inline function to other files. To be fixed in KT-71137.

// FILE: OK.kt
private lateinit var o: String
lateinit var k: String

internal inline fun initializeAndReadLateinitProperties(): String {
    if (::o.isInitialized) throw Error("Property 'o' already initialized")
    o = "O"
    if (!::o.isInitialized) throw Error("Property 'o' is not initialized")

    if (::k.isInitialized) throw Error("Property 'k' already initialized")
    k = "K"
    if (!::k.isInitialized) throw Error("Property 'k' is not initialized")

    return o + k
}

// FILE: main.kt
fun box(): String = initializeAndReadLateinitProperties()
